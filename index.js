function resizeWindow(){function t(){var t=window.innerHeight,e=window.innerWidth;document.body.style.height=t+"px",document.body.style.width=e+"px"}t(),window.onresize=function(){t()}}var loadingHtml='<div class="loading"><span></span><span></span><span></span></div>',blog={_get:function(t,e,n=function(){}){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e(i.responseText),i.status>400&&n(i.status)},i.send()},getPostListByPage:function(t,e,n){var i="./datas/post_comment_"+t+".json";this._get(i,(function(t){e(JSON.parse(t))}),n)},getPostListByTag:function(t,e,n){var i="./datas/tag_"+t+".json";this._get(i,(function(t){e(JSON.parse(t))}),n)},getAllPostList:function(t,e){this._get("./datas/all_posts.json",(function(e){t(JSON.parse(e))}),e)},getTagList:function(t,e){this._get("./datas/tags.json",(function(e){t(JSON.parse(e))}),e)},getPostContent:function(t,e,n){var i="./datas/post_"+t+".json";this._get(i,(function(t){e(JSON.parse(t))}),n)},getCount:function(t,e){this._get("./datas/count.json",(function(e){t(JSON.parse(e))}),e)}};function $(t){return document.querySelector(t)}function $$(t){return document.querySelectorAll(t)}function gtag(t){var e="";return t.forEach((function(t){e+='<a href="#/tag/'+t+'">'+t+"</a>"})),e}var initef=!1,initer={index:function(t,e){document.title="陈思全的博客 - 首页",e.querySelector("ul.postlist").innerHTML=loadingHtml,e.querySelector(".btn.next").style.display="block",e.querySelector(".btn.prev").style.display="block",t=isNaN(parseInt(t))||parseInt(t)<0?0:parseInt(t),e.querySelector(".btn.prev").onclick=function(){t--,location.hash="index/"+t},e.querySelector(".btn.next").onclick=function(){t++,location.hash="index/"+t},e.querySelector("span.total").innerHTML=-1,e.querySelector("span.current").innerHTML=t+1,blog.getPostListByPage(t,(function(n){var i="";n.data.forEach((function(t){i+=`<li>\n                    <h1><a href="#/post/${t.id}">${t.title}</a></h1>\n                    <p class="desc">${t.desc}...<a href="#/post/${t.id}">阅读全文</a></p>\n                    <div class="message">\n                        <div class="tags">${gtag(t.tags)}</div>\n                        <div class="date">${new Date(t.time.substring(0,t.time.length-2)+"+0800").toLocaleString()}</div>\n                    </div>\n                </li>`})),e.querySelector("ul.postlist").innerHTML=i;var o=n.total;e.querySelector("span.total").innerHTML=o,e.querySelector("span.current").innerHTML=t+1,t+1>=o&&(e.querySelector(".btn.next").style.display="none"),t<=0&&(e.querySelector(".btn.prev").style.display="none")}),(function(t){$(".error-page").style.display="block",$(".error-page .error-title").innerHTML=t}))},category:function(t,e){document.title="陈思全的博客 - 分类",e.querySelector("ul.categorylist").innerHTML=loadingHtml,blog.getTagList((function(t){var n="";t.forEach((function(t){n+=`<li data-tag="${t}" style="background-color:${function(){for(var t="#",e=0;e<6;e++)t+="0123456789"[Math.floor(10*Math.random())];return t}()}"># <span>${t}</span></li>`})),e.querySelector("ul.categorylist").innerHTML=n,e.querySelectorAll("ul.categorylist li").forEach((function(t){t.onclick=function(){location.hash="tag/"+t.getAttribute("data-tag")}}))}),(function(t){$(".error-page").style.display="block",$(".error-page .error-title").innerHTML=t}))},friends:function(t,e){document.title="陈思全的博客 - 友链",initef||(initef=!0,$(".friendlinks").innerHTML=loadingHtml,blog._get("https://siquan001.github.io/friendlink.json",(function(t){var e=JSON.parse(t),n="";e.forEach((function(t){n+="<li><a "+("?"==t.type?'class="no" title="链接可能无法访问"':"")+' href="'+t.url+'" target="_blank"><img src="'+t.icon+'"/><div class="m"><div class="title">'+t.title+'</div><div class="desc">'+t.desc+"</div></div></a></li>"})),$(".friendlinks").innerHTML=n})))},archive:function(t,e){document.title="陈思全的博客 - 归档",e.querySelector("ul.archivelist").innerHTML=loadingHtml,blog.getAllPostList((function(t){var n="";t.forEach((function(t){n+=`<li><div class="title"><a href="#/post/${t.id}">${t.title}</a></div><div class="date">${t.time}</div></li>`})),e.querySelector("ul.archivelist").innerHTML=n}))},tag:function(t,e){document.title=decodeURI(t)+" 分类",e.querySelector("ul.postlist").innerHTML=loadingHtml,e.querySelector(".tag-title span").innerText=decodeURI(t),blog.getPostListByTag(t,(function(t){var n="";t.forEach((function(t){n+=`<li>\n                    <h1><a href="#/post/${t.id}">${t.title}</a></h1>\n                    <p class="desc">${t.desc}...<a href="#/post/'+l.id+'">阅读全文</a></p>\n                    <div class="message">\n                        <div class="tags">${gtag(t.tags)}</div>\n                        <div class="date">${new Date(t.time.substring(0,t.time.length-2)+"+0800").toLocaleString()}</div>\n                    </div>\n                </li>`})),e.querySelector("ul.postlist").innerHTML=n}),(function(t){$(".error-page").style.display="block",$(".error-page .error-title").innerHTML=t}))},post:function(t,e){e.querySelector(".post-title").innerText="",e.querySelector(".post-date").innerText="",e.querySelector(".post-tags").innerHTML="",e.querySelector(".post-content").innerHTML=loadingHtml,e.querySelector(".post-container").style.display="block",blog.getPostContent(t,(function(t){e.querySelector(".post-title").innerText=t.detail.title,e.querySelector(".post-date").innerText=t.detail.time,e.querySelector(".post-tags").innerHTML=gtag(t.detail.tags),e.querySelector(".post-content").innerHTML=t.html,document.title=t.detail.title}),(function(t){$(".error-page").style.display="block",$(".error-page .error-title").innerHTML=t,e.querySelector(".post-container").style.display="none"}))}};function initRouter(){function t(t){t.addEventListener("click",(function(){t.getAttribute("data-to")?window.location.hash=t.getAttribute("data-to"):t.getAttribute("data-link")&&window.open(t.getAttribute("data-link"))}))}function e(){$(".error-page").style.display="none";var t=window.location.hash.slice(1),e=[];if("/"==t[0]&&(t=t.slice(1)),-1!=t.indexOf("/")){var n=t.indexOf("/");e=[t.slice(0,n),t.slice(n+1)]}else e=[t];if(initer[e[0]]){var i=$(".container .c .page[data-page='"+e[0]+"']");$$(".container .c .page").forEach((function(t){t.classList.remove("act")})),i.classList.add("act"),initer[e[0]](e[1],i)}else{if("err"!=e[0])return void(window.location.hash="#index");$(".error-page").style.display="block",$(".error-page .error-title").innerText=e[1]}function o(e){e.getAttribute("data-to")==t?e.classList.add("act"):e.classList.remove("act")}$(".container .c .content").scrollTo({top:0,behavior:"smooth"}),$$(".container .menu .item").forEach(o),$$(".container .mobmenu .item").forEach(o)}$$(".container .menu .item").forEach(t),$$(".container .mobmenu .item").forEach(t),window.onhashchange=e,e()}resizeWindow(),initRouter(),document.querySelector(".menubtn").onclick=function(){document.querySelector(".mobmenu").classList.add("show")},document.querySelector(".mobmenu").onclick=function(){this.classList.remove("show")},blog.getCount((function(t){$(".tagcount").innerHTML=t.tag,$(".postcount").innerHTML=t.post}));